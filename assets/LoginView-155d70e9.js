import{o as l,c,a as s,w as p,v as u,b as r,d as f,e as m,F as _,p as g,f as h}from"./index-098e3105.js";import{_ as b,L as d}from"./LayoutFooter-35dbfd97.js";const x="/assets/logo-3f150f32.png";const i=t=>(g("data-v-7c3f02ac"),t=t(),h(),t),v={class:"main container"},y={class:"row justify-content-md-center"},w={class:"col-md-5 mt-2"},S=i(()=>s("img",{alt:"logo",class:"rounded w-100 p-5",src:x},null,-1)),D=i(()=>s("div",{class:"text-center m-5 fs-3"},"立方品展覽報到系統",-1)),j={class:"m-4 text-center"},V={class:"mb-4"},E=i(()=>s("label",{class:"form-label fs-4 font-weight-bold"},"請輸入展覽代碼",-1)),I={class:"mx-auto"},L={key:1,type:"button",class:"btn btn-warning btn-lg rounded-pill px-5",disabled:""},M=i(()=>s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),N={components:{LayoutFooter:d},props:["env","api_url","client_info"],data(){return{expocode:"EAF3911",loading:!1}},created(){},methods:{getMyData(t){let e=localStorage.getItem(t)||null;if(typeof e=="string")try{e=JSON.parse(e)}catch{}return e},setMyData(t,e){typeof e=="object"&&(e=JSON.stringify(e)),localStorage.setItem(t,e)},formatDate(t){let e=new Date(t);return String(e.getFullYear())+"-"+String(e.getMonth()+1).padEnd(2,"0")+"-"+String(e.getDate()).padEnd(2,"0")},onSubmit(){if(!this.expocode)return alert("請先填入展覽代號"),!1;let t=this;if(t.loading=!0,this.api_url!="localhost"){const e=this.api_url+"api/getExpo?expocode="+this.expocode,o=new Headers;o.append("Content-Type","application/json"),fetch(e,{mode:"no-cors",method:"GET",headers:o,redirect:"follow"}).then(n=>{if(console.log(n.status,n.json()),n.status==200)return n.json();alert(n.message)}).then(n=>{console.log(n),n.date=t.formatDate(n.expostart),n.expocode=t.expocode,t.setMyData("exhibition",n),t.loading=!1,t.$router.push("/scan")}).catch(n=>{t.loading=!1,console.log("Error:",n)})}else fetch("/data/demo.json").then(e=>e.json()).then(e=>{let o=e.exhibition;o.date=t.formatDate(o.expostart),console.log(o.date),o.expocode=t.expocode,t.setMyData("exhibition",o),setTimeout(function(){t.$router.push("/scan")},500)})}},mounted(){}},k=Object.assign(N,{__name:"LoginView",setup(t){return(e,o)=>(l(),c(_,null,[s("div",v,[s("div",y,[s("div",w,[S,D,s("form",j,[s("div",V,[E,p(s("input",{type:"text",class:"form-control form-control-lg",ref:"_form","onUpdate:modelValue":o[0]||(o[0]=a=>e.expocode=a)},null,512),[[u,e.expocode]])]),s("div",I,[e.loading==!1?(l(),c("button",{key:0,type:"button",class:"btn btn-warning btn-lg rounded-pill px-5",onClick:o[1]||(o[1]=(...a)=>e.onSubmit&&e.onSubmit(...a))},"確認送出")):r("",!0),e.loading==!0?(l(),c("button",L,[M,f(" Loading... ")])):r("",!0)])])])])]),m(d,{env:t.env,client:t.client_info},null,8,["env","client"])],64))}}),B=b(k,[["__scopeId","data-v-7c3f02ac"]]);export{B as default};
